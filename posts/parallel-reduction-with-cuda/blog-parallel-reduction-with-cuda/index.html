<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="å†™åœ¨å‰é¢ ğŸ“š ç‰ˆæƒå£°æ˜ | Copyright Notice æœ¬æ–‡å†…å®¹å‚è€ƒå¹¶éƒ¨åˆ†ç¿»è¯‘è‡ªä»¥ä¸‹ä¸¤ç¯‡èµ„æ–™ï¼š NVIDIA å®˜æ–¹ PPTï¼ˆreduction.pdfï¼‰ Medium åšå®¢ï¼š7 Step Optimization of Parallel Reduction with CUDA ä¸Šè¿°èµ„æ–™ç‰ˆæƒ"><title>7 Step Optimization of Parallel Reduction with CUDA</title>
<link rel=canonical href=https://keqiye.github.io/posts/parallel-reduction-with-cuda/blog-parallel-reduction-with-cuda/><link rel=stylesheet href=/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="7 Step Optimization of Parallel Reduction with CUDA"><meta property='og:description' content="å†™åœ¨å‰é¢ ğŸ“š ç‰ˆæƒå£°æ˜ | Copyright Notice æœ¬æ–‡å†…å®¹å‚è€ƒå¹¶éƒ¨åˆ†ç¿»è¯‘è‡ªä»¥ä¸‹ä¸¤ç¯‡èµ„æ–™ï¼š NVIDIA å®˜æ–¹ PPTï¼ˆreduction.pdfï¼‰ Medium åšå®¢ï¼š7 Step Optimization of Parallel Reduction with CUDA ä¸Šè¿°èµ„æ–™ç‰ˆæƒ"><meta property='og:url' content='https://keqiye.github.io/posts/parallel-reduction-with-cuda/blog-parallel-reduction-with-cuda/'><meta property='og:site_name' content='Keqiçš„åšå®¢'><meta property='og:type' content='article'><meta property='article:section' content='Posts'><meta property='article:published_time' content='2025-05-22T00:00:00+00:00'><meta property='article:modified_time' content='2025-05-22T00:00:00+00:00'><meta name=twitter:title content="7 Step Optimization of Parallel Reduction with CUDA"><meta name=twitter:description content="å†™åœ¨å‰é¢ ğŸ“š ç‰ˆæƒå£°æ˜ | Copyright Notice æœ¬æ–‡å†…å®¹å‚è€ƒå¹¶éƒ¨åˆ†ç¿»è¯‘è‡ªä»¥ä¸‹ä¸¤ç¯‡èµ„æ–™ï¼š NVIDIA å®˜æ–¹ PPTï¼ˆreduction.pdfï¼‰ Medium åšå®¢ï¼š7 Step Optimization of Parallel Reduction with CUDA ä¸Šè¿°èµ„æ–™ç‰ˆæƒ"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src="https://avatars.githubusercontent.com/u/175122082?v=4" width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸª</span></figure><div class=site-meta><h1 class=site-name><a href=/>Keqiçš„åšå®¢</a></h1><h2 class=site-description>æ•°å­¦ã€ç‰©ç†ä¸ç¼–ç¨‹</h2></div></header><ol class=menu-social><li><a href=mailto:plloningye@gmail.com target=_blank title=E-mail rel=me><svg data-name="Livello 1" id="Livello_1" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg"><title/><path d="M116.73 31.83a3 3 0 00-4.2-.61L64.14 67.34a1 1 0 01-1.2.0L15.5 31.06a3 3 0 10-3.64 4.77l37.3 28.53-36.89 27.8A3 3 0 1015.88 97L54.11 68.14l5.18 4a7 7 0 008.43.06l5.44-4.06L111.84 97a3 3 0 103.59-4.81L78.17 64.35 116.12 36A3 3 0 00116.73 31.83z"/><path d="M113 19H15A15 15 0 000 34V94a15 15 0 0015 15h98a15 15 0 0015-15V34A15 15 0 00113 19zm9 75a9 9 0 01-9 9H15a9 9 0 01-9-9V34a9 9 0 019-9h98a9 9 0 019 9z"/></svg></a></li><li><a href=https://github.com/KeqiYe target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/posts/><span>æ–‡ç« </span></a></li><li><a href=/categories/><span>åˆ†ç±»</span></a></li><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://keqiye.github.io/en/>English</option><option value=https://keqiye.github.io/ selected>ä¸­æ–‡</option></select></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#å†™åœ¨å‰é¢>å†™åœ¨å‰é¢</a></li><li><a href=#ä»€ä¹ˆæ˜¯-parallel-reduction-ç®—æ³•>ä»€ä¹ˆæ˜¯ Parallel Reduction ç®—æ³•ï¼Ÿ</a><ol><li><a href=#æ ‘å½¢å½’çº¦æ¨¡å‹tree-based-reduction>æ ‘å½¢å½’çº¦æ¨¡å‹ï¼ˆTree-based Reductionï¼‰</a></li><li><a href=#kernel-åˆ†è§£kernel-decomposition>Kernel åˆ†è§£ï¼ˆKernel Decompositionï¼‰</a></li><li><a href=#æ³¨æ„>æ³¨æ„ï¼</a></li><li><a href=#æ€§èƒ½è¡¡é‡æŒ‡æ ‡our-metrics>æ€§èƒ½è¡¡é‡æŒ‡æ ‡ï¼ˆOur Metricsï¼‰</a></li></ol></li><li><a href=#reduce-0äº¤é”™å¯»å€æ³•interleaved-addressing>REDUCE-0ï¼šäº¤é”™å¯»å€æ³•ï¼ˆInterleaved Addressingï¼‰</a><ol><li><a href=#æ€è·¯ä»‹ç»>æ€è·¯ä»‹ç»</a></li><li><a href=#cuda-ä»£ç å®ç°>CUDA ä»£ç å®ç°</a></li><li><a href=#è¯¥æ–¹æ³•å­˜åœ¨çš„é—®é¢˜>è¯¥æ–¹æ³•å­˜åœ¨çš„é—®é¢˜</a></li></ol></li><li><a href=#reduce-1äº¤é”™å¯»å€æ³•-20interleaved-addressing-20>REDUCE-1ï¼šäº¤é”™å¯»å€æ³• 2.0ï¼ˆInterleaved Addressing 2.0ï¼‰</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/reduction/>Reduction
</a><a href=/categories/cuda/>CUDA
</a><a href=/categories/optimization/>Optimization</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/posts/parallel-reduction-with-cuda/blog-parallel-reduction-with-cuda/>7 Step Optimization of Parallel Reduction with CUDA</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>May 22, 2025</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>é˜…è¯»æ—¶é•¿: 6 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><h2 id=å†™åœ¨å‰é¢>å†™åœ¨å‰é¢</h2><blockquote><p>ğŸ“š <strong>ç‰ˆæƒå£°æ˜ | Copyright Notice</strong></p><p>æœ¬æ–‡å†…å®¹å‚è€ƒå¹¶éƒ¨åˆ†ç¿»è¯‘è‡ªä»¥ä¸‹ä¸¤ç¯‡èµ„æ–™ï¼š</p><ul><li><a class=link href=https://developer.download.nvidia.com/assets/cuda/files/reduction.pdf target=_blank rel=noopener>NVIDIA å®˜æ–¹ PPTï¼ˆreduction.pdfï¼‰</a></li><li><a class=link href=https://medium.com/@rimikadhara/7-step-optimization-of-parallel-reduction-with-cuda-33a3b2feafd8 target=_blank rel=noopener>Medium åšå®¢ï¼š7 Step Optimization of Parallel Reduction with CUDA</a></li></ul><p>ä¸Šè¿°èµ„æ–™ç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚æœ¬æ–‡æ—¨åœ¨å­¦ä¹ å’ŒæŠ€æœ¯ä¼ æ’­ï¼Œä»…ä¾›ä¸ªäººå’Œå­¦æœ¯ä½¿ç”¨ã€‚å¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ã€‚</p><p>This article is a study and partial translation based on the works above. All rights belong to the original authors. The content is shared for learning and research purposes only. Please contact for removal if there is any infringement.</p></blockquote><p>âš ï¸ <strong>è‹¥ä¸Šè¿°é“¾æ¥å¤±æ•ˆ</strong>ï¼Œè¯»è€…å¯ä»¥åœ¨ Google ä¸­ä½¿ç”¨å…³é”®è¯æŸ¥æ‰¾ï¼š<br><code>7 Step Optimization of Parallel Reduction with CUDA</code></p><p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä¼˜åŒ– CUDA ä¸­çš„å¹¶è¡Œè§„çº¦ç®—æ³• (Parallel Reduction)ï¼Œå¹¶é€šè¿‡ä¸ƒä¸ªæ­¥éª¤é€æ­¥æå‡æ€§èƒ½ã€‚å°½ç®¡ä¸Šè¿°é“¾æ¥ä¸­ä½œè€…å·²ç»è¯´æ˜çš„ååˆ†æ¸…æ¥šã€‚æˆ‘è¿™é‡Œè¿˜æ˜¯ä¼šä½¿ç”¨ä¸­æ–‡å†èµ°ä¸€è¾¹æµç¨‹ï¼Œä¸€æ¥ä¸ºä¸­æ–‡äº’è”ç½‘æä¾›å‚è€ƒèµ„æ–™ï¼ŒäºŒæ¥ä¸ºæˆ‘è‡ªå·±å­¦ä¹ ã€‚</p><p>CUDAå¹¶è¡Œä»£ç ä¸ä¸²è¡Œä»£ç çš„æ•´ä½“è®¾è®¡æ€è·¯ç›¸å·®å¾ˆå¤§ï¼Œè™½ç„¶æ˜¯æŒ‰ç…§çº¿ç¨‹æ¥ç¼–å†™ï¼Œä½†æ˜¯è¦ä»Blockå±‚é¢å»æ€è€ƒå’Œè®¾è®¡ã€‚</p><h2 id=ä»€ä¹ˆæ˜¯-parallel-reduction-ç®—æ³•>ä»€ä¹ˆæ˜¯ Parallel Reduction ç®—æ³•ï¼Ÿ</h2><p>è®©æˆ‘ä»¬é¦–å…ˆäº†è§£ä¸€ä¸‹ Parallel Reduction ç®—æ³•çš„åŸºæœ¬æ¦‚å¿µã€‚å®ƒæ˜¯ä¸€ç§ <strong>æ•°æ®å¹¶è¡ŒåŸè¯­</strong>ï¼Œåœ¨ CUDA ä¸­å®ç°ç›¸å¯¹ç›´æ¥ã€‚ç®€å•æ¥è¯´ï¼ŒParallel Reduction çš„ç›®æ ‡æ˜¯é€šè¿‡ GPU çš„çº¿ç¨‹å±‚çº§ç»“æ„å¹¶è¡Œåœ°å¯¹å‘é‡ã€çŸ©é˜µæˆ–å¼ é‡è¿›è¡Œå½’çº¦æ“ä½œã€‚</p><p>è¿™ç§å½’çº¦æ˜¯é€šè¿‡å¦‚ <code>sum()</code>ã€<code>min()</code>ã€<code>max()</code> æˆ– <code>avg()</code> ç­‰æ“ä½œæ¥å®ç°çš„ï¼Œç”¨äºå¯¹æ•°æ®è¿›è¡Œèšåˆä¸ç®€åŒ–ã€‚äº‹å®ä¸Šï¼Œå¯¹ä¸€ä¸ªæ•°ç»„æ±‚ä¸Šè¿°æ“ä½œæ˜¯ååˆ†ç®€å•çš„ï¼Œå¦‚æœæƒ³å®ç° CUDA å¹¶è¡Œï¼Œæ ¸å¿ƒéš¾åº¦åœ¨äºè®¿å­˜è®¾è®¡ã€‚è‹¥å¤„ç†ä¸å½“ï¼Œå³ä½¿æ˜¯è¿™äº›â€œçœ‹ä¼¼ç®€å•â€çš„è®¡ç®—ä¹Ÿå¯èƒ½å˜å¾—è€—æ—¶ã€‚</p><p>é«˜æ•ˆå®ç° Parallel Reduction çš„ä¸€ä¸ªåŸå› æ˜¯å®ƒä»¬éå¸¸é€šç”¨ï¼Œå¹¶åœ¨è®¸å¤šåº”ç”¨ä¸­èµ·ç€å…³é”®ä½œç”¨ã€‚æˆ‘ä¸»è¦ä½¿ç”¨SPHç ”ç©¶å°è¡Œæ˜Ÿæ’å‡»ï¼Œæ¯ä¸€æ­¥SPHæ±‚è§£è¿‡ç¨‹ä¸­ï¼Œéƒ½éœ€è¦è¿›è¡ŒåŒ…å›´ç›’è®¡ç®—ï¼Œå¯¹åº”ç€ <code>min()</code>ã€<code>max()</code> æ“ä½œã€‚</p><h3 id=æ ‘å½¢å½’çº¦æ¨¡å‹tree-based-reduction>æ ‘å½¢å½’çº¦æ¨¡å‹ï¼ˆTree-based Reductionï¼‰</h3><p>å¹¶è¡Œå½’çº¦å¯ä»¥è¢«ç±»æ¯”ä¸ºä¸€ç§â€œæ ‘çŠ¶å½’çº¦â€ï¼ˆtree-based reductionï¼‰è¿‡ç¨‹ï¼šæ•°æ®åœ¨å„çº¿ç¨‹å—ï¼ˆthread blockï¼‰ä¹‹é—´é€å±‚å½’çº¦ã€‚</p><p>ä½†è¿™é‡Œå‡ºç°äº†ä¸€ä¸ªå…³é”®é—®é¢˜ï¼š</p><blockquote><p><strong>æˆ‘ä»¬å¦‚ä½•åœ¨ä¸åŒçº¿ç¨‹å—ä¹‹é—´ä¼ é€’ä¸­é—´ç»“æœï¼Ÿ</strong></p></blockquote><p>æœ€ç›´æ¥çš„æƒ³æ³•æ˜¯ä½¿ç”¨â€œå…¨å±€åŒæ­¥ï¼ˆglobal synchronizationï¼‰â€ â€”â€” å…ˆè®©æ¯ä¸ªçº¿ç¨‹å—å®Œæˆä¸€éƒ¨åˆ†è®¡ç®—ï¼Œç„¶åè¿›è¡Œå…¨å±€åŒæ­¥å¹¶ç»§ç»­é€’å½’å¤„ç†ã€‚</p><p>ç„¶è€Œï¼ŒCUDA <strong>å¹¶ä¸æ”¯æŒå…¨å±€åŒæ­¥</strong>ï¼Œå› ä¸ºè¿™åœ¨ç¡¬ä»¶ä¸Šå¼€é”€æå¤§ï¼Œè¿˜å¯èƒ½å¯¼è‡´æ­»é”ï¼Œåªèƒ½ä½¿ç”¨å°‘é‡çº¿ç¨‹å—ï¼Œé™åˆ¶æ€§èƒ½æå‡ã€‚</p><p>ğŸ“Œ <strong>æ›´å®ç”¨çš„æ–¹æ¡ˆæ˜¯ï¼šKernel åˆ†è§£ï¼ˆKernel Decompositionï¼‰</strong></p><h3 id=kernel-åˆ†è§£kernel-decomposition>Kernel åˆ†è§£ï¼ˆKernel Decompositionï¼‰</h3><p>ä¸ºäº†æ›´é«˜æ•ˆåœ°ä¼ é€’çº¿ç¨‹å—é—´çš„ä¸­é—´ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªå¤§çš„ kernel æ‹†åˆ†ä¸ºå¤šä¸ªå° kernelã€‚è¿™ç§åšæ³•è¢«ç§°ä¸º <strong>Kernel åˆ†è§£</strong>ã€‚</p><p><img src=/images/tree-reduction.png loading=lazy alt="Tree-based Reduction"></p><p>Kernel åˆ†è§£çš„ä¼˜åŠ¿åŒ…æ‹¬ï¼š</p><ul><li>å‡å°‘ç¡¬ä»¶ä¸è½¯ä»¶å¼€é”€</li><li>æé«˜èµ„æºåˆ©ç”¨ç‡</li><li>é¿å…çº¿ç¨‹å—é—´åŒæ­¥</li><li>æå‡æ•´ä½“æ‰§è¡Œæ•ˆç‡</li></ul><hr><h3 id=æ³¨æ„>æ³¨æ„ï¼</h3><p>æœ¬æ–‡é‡ç‚¹è®²è§£è§„çº¦ï¼ˆreductionï¼‰çš„åŸºæœ¬æ€æƒ³ï¼Œè€Œéå®Œæ•´çš„æœ€ç»ˆå®ç°ã€‚å› æ­¤ï¼Œæ¯ä¸ª kernel çš„æ‰§è¡Œç»“æœå¹¶ä¸æ˜¯ä¸€ä¸ªå…¨å±€å•ä¸€å€¼ï¼Œè€Œæ˜¯ <strong>æ¯ä¸ª block å†…éƒ¨çš„è§„çº¦ç»“æœ</strong>ã€‚</p><p>å…·ä½“æ¥è¯´ï¼š</p><ul><li>æ¯ä¸ª block è´Ÿè´£å¤„ç†è‹¥å¹²ä¸ªçº¿ç¨‹çš„(<code>blockDim</code>)æ•°æ®ï¼Œå¹¶åœ¨ block å†…å®Œæˆä¸€æ¬¡å±€éƒ¨è§„çº¦ï¼›</li><li>æ¯ä¸ª block çš„ç»“æœä¼šè¢«å†™å…¥è¾“å‡ºæ•°ç»„çš„ <code>blockIdx.x</code> ä½ç½®ï¼›</li><li>å› æ­¤ï¼Œæœ€ç»ˆè¾“å‡ºæ•°ç»„çš„é•¿åº¦ç­‰äº <code>gridDim.x</code>ï¼ˆå³ block æ•°é‡ï¼‰ï¼Œè€Œä¸æ˜¯å•ä¸ªå…ƒç´ ã€‚</li></ul><hr><h3 id=æ€§èƒ½è¡¡é‡æŒ‡æ ‡our-metrics>æ€§èƒ½è¡¡é‡æŒ‡æ ‡ï¼ˆOur Metricsï¼‰</h3><p>æˆ‘ä»¬è¡¡é‡å¹¶è¡Œå½’çº¦ç®—æ³•æ€§èƒ½çš„ä¸¤ä¸ªå…³é”®æŒ‡æ ‡æ˜¯ï¼š</p><ul><li><strong>æ—¶é—´ï¼ˆTimeï¼‰</strong></li><li><strong>å¸¦å®½ï¼ˆBandwidthï¼‰</strong></li></ul><p>è¿™ä¸¤ä¸ªæŒ‡æ ‡åæ˜ äº† GPU æ˜¯å¦è¾¾åˆ°äº†å³°å€¼æ€§èƒ½ã€‚æˆ‘ä»¬å¸Œæœ›åœ¨ä»¥ä¸‹ä¸¤æ–¹é¢è¿›è¡Œä¼˜åŒ–ï¼š</p><ol><li><strong>æé«˜æ•°æ®è¯»å†™æ•ˆç‡</strong></li><li><strong>åŠ å¿«è®¡ç®—é€Ÿåº¦ã€æå‡çº¿ç¨‹åˆ©ç”¨ç‡</strong></li></ol><p>ä¸€æ®µç†æƒ³çš„ GPU ç¨‹åºï¼Œä¸ä»…è¿è¡Œå¿«é€Ÿï¼Œè¿˜èƒ½ä½¿å¤§å¤šæ•°çº¿ç¨‹éƒ½åœ¨å·¥ä½œã€‚</p><h2 id=reduce-0äº¤é”™å¯»å€æ³•interleaved-addressing>REDUCE-0ï¼šäº¤é”™å¯»å€æ³•ï¼ˆInterleaved Addressingï¼‰</h2><h3 id=æ€è·¯ä»‹ç»>æ€è·¯ä»‹ç»</h3><p>æœ€æœ´ç´ çš„ä¸€ç§å¹¶è¡Œå½’çº¦æ–¹æ³•æ˜¯é‡‡ç”¨â€œäº¤é”™å¯»å€ï¼ˆInterleaved Addressingï¼‰â€ï¼Œä½œä¸ºæˆ‘ä»¬ä¼˜åŒ–è¿‡ç¨‹çš„åŸºç¡€ç‰ˆæœ¬ã€‚åœ¨è¿™ç§æ–¹æ³•ä¸­ï¼š</p><ul><li>æ¯ä¸ªçº¿ç¨‹å¤„ç†ä¸€ç»„å…ƒç´ ï¼›</li><li>æ¯è½®å½’çº¦æ—¶ï¼Œçº¿ç¨‹å°†å…¶å½“å‰å€¼ä¸ä¸€æ®µè·ç¦»å†…çš„å¦ä¸€ä¸ªå…ƒç´ å€¼ç›¸åŠ ï¼›</li><li>æ¯è½®æ­¥é•¿åŠ å€ï¼Œç›´åˆ°æœ€ç»ˆå¾—å‡ºè¯¥ block çš„å½’çº¦ç»“æœã€‚</li></ul><p>ğŸ“˜ ä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ª 1024 å…ƒç´ æ•°ç»„ï¼Œä½¿ç”¨ 256 çº¿ç¨‹å—ï¼Œæ¯ä¸ªçº¿ç¨‹å¤„ç†å››ä¸ªé—´éš”ä¸º 256 çš„æ•°æ®ç‚¹ã€‚</p><p>è¿™ç§æ–¹å¼å¯ä»¥ç¡®ä¿ï¼š</p><ul><li>å„çº¿ç¨‹å¹¶è¡Œå·¥ä½œï¼Œè´Ÿè½½å‡è¡¡ï¼›</li><li>çº¿ç¨‹é—´åŒæ­¥æ›´ç®€å•ï¼›</li><li>ä¾¿äº GPU é«˜æ•ˆæ‰§è¡Œã€‚</li></ul><h3 id=cuda-ä»£ç å®ç°>CUDA ä»£ç å®ç°</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>//</span> <span class=n>REDUCTION</span> <span class=mi>0</span> <span class=err>â€“</span> <span class=n>Interleaved</span> <span class=n>Addressing</span>
</span></span><span class=line><span class=cl><span class=n>__global__</span> <span class=n>void</span> <span class=n>reduce0</span><span class=p>(</span><span class=ne>int</span> <span class=o>*</span><span class=n>g_in_data</span><span class=p>,</span> <span class=ne>int</span> <span class=o>*</span><span class=n>g_out_data</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=n>extern</span> <span class=n>__shared__</span> <span class=ne>int</span> <span class=n>sdata</span><span class=p>[];</span>  <span class=o>//</span> <span class=n>stored</span> <span class=ow>in</span> <span class=n>the</span> <span class=n>shared</span> <span class=n>memory</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=n>Each</span> <span class=n>thread</span> <span class=n>loading</span> <span class=n>one</span> <span class=n>element</span> <span class=n>from</span> <span class=n>global</span> <span class=n>onto</span> <span class=n>shared</span> <span class=n>memory</span>
</span></span><span class=line><span class=cl>    <span class=n>unsigned</span> <span class=ne>int</span> <span class=n>tid</span> <span class=o>=</span> <span class=n>threadIdx</span><span class=o>.</span><span class=n>x</span><span class=p>;</span> <span class=o>//</span><span class=n>tidè¡¨ç¤ºå½“å‰çº¿ç¨‹åœ¨æ‰€åœ¨</span> <span class=n>block</span> <span class=err>ä¸­çš„å±€éƒ¨ç´¢å¼•</span>
</span></span><span class=line><span class=cl>    <span class=n>unsigned</span> <span class=ne>int</span> <span class=n>i</span> <span class=o>=</span> <span class=n>blockIdx</span><span class=o>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>blockDim</span><span class=o>.</span><span class=n>x</span> <span class=o>+</span> <span class=n>threadIdx</span><span class=o>.</span><span class=n>x</span><span class=p>;</span><span class=o>//</span><span class=n>iè¡¨ç¤ºå½“å‰çº¿ç¨‹åœ¨æ•´ä¸ª</span> <span class=n>grid</span> <span class=err>ä¸­çš„å…¨å±€çº¿ç¨‹ç¼–å·</span>
</span></span><span class=line><span class=cl>    <span class=n>sdata</span><span class=p>[</span><span class=n>tid</span><span class=p>]</span> <span class=o>=</span> <span class=n>g_in_data</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=n>__syncthreads</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=n>Reduction</span> <span class=n>method</span> <span class=o>--</span> <span class=n>occurs</span> <span class=ow>in</span> <span class=n>shared</span> <span class=n>memory</span> <span class=n>because</span> <span class=n>that</span><span class=s1>&#39;s where sdata is stored</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=p>(</span><span class=n>unsigned</span> <span class=ne>int</span> <span class=n>s</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>s</span> <span class=o>&lt;</span> <span class=n>blockDim</span><span class=o>.</span><span class=n>x</span><span class=p>;</span> <span class=n>s</span> <span class=o>*=</span> <span class=mi>2</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>tid</span> <span class=o>%</span> <span class=p>(</span><span class=mi>2</span> <span class=o>*</span> <span class=n>s</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>sdata</span><span class=p>[</span><span class=n>tid</span><span class=p>]</span> <span class=o>+=</span> <span class=n>sdata</span><span class=p>[</span><span class=n>tid</span> <span class=o>+</span> <span class=n>s</span><span class=p>];</span>   
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>__syncthreads</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>tid</span> <span class=o>==</span> <span class=mi>0</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=n>g_out_data</span><span class=p>[</span><span class=n>blockIdx</span><span class=o>.</span><span class=n>x</span><span class=p>]</span> <span class=o>=</span> <span class=n>sdata</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=è¯¥æ–¹æ³•å­˜åœ¨çš„é—®é¢˜>è¯¥æ–¹æ³•å­˜åœ¨çš„é—®é¢˜</h3><p>è™½ç„¶è¿™ç§æ–¹æ³•æ˜¯å¹¶è¡Œç¼–ç¨‹çš„è‰¯å¥½åŸºç¡€ï¼Œä½†å®ƒä»å­˜åœ¨ä¸€äº›é—®é¢˜ã€‚è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹æ€§èƒ½æŒ‡æ ‡ï¼Œåˆ†æä»£ç åœ¨è®¡ç®—å’Œå†…å­˜æ–¹é¢å¯èƒ½å­˜åœ¨çš„ä½æ•ˆä¹‹å¤„ã€‚</p><p><strong>è®¡ç®—æ–¹é¢ï¼š</strong> ä¸€ä¸ªä¸»è¦çš„è®¡ç®—ä½æ•ˆæ˜¯ <code>%</code> æ“ä½œç¬¦çš„ä½¿ç”¨ã€‚ç”±äº <code>%</code> æ¶‰åŠé™¤æ³•æ“ä½œï¼Œè€Œé™¤æ³•åœ¨åº•å±‚æ˜¯éå¸¸æ…¢çš„æ“ä½œï¼Œè¿™ä¼šä¸¥é‡å½±å“æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§é‡çº¿ç¨‹é¢‘ç¹æ‰§è¡Œè¯¥æ“ä½œçš„å†…æ ¸ä¸­ã€‚æ­¤å¤–ï¼Œäº¤é”™å¯»å€æ¨¡å¼å¯¼è‡´äº†ä¸¥é‡çš„ warp å‘æ•£ï¼ˆdivergenceï¼‰ï¼Œå› ä¸ºåŒä¸€ä¸ª warp ä¸­çš„çº¿ç¨‹éœ€è¦æ‰§è¡Œä¸åŒçš„åˆ†æ”¯è·¯å¾„ï¼ˆåŸºäºå½“å‰çš„ <code>if</code> æ¡ä»¶ï¼‰ã€‚è¿™ç§è·¯å¾„å‘æ•£å¯¼è‡´ warp éœ€è¦ç­‰å¾…è¾ƒæ…¢çš„çº¿ç¨‹å®Œæˆï¼Œé€ æˆé˜»å¡ï¼Œä»è€Œä¸¥é‡é™ä½æ€§èƒ½ã€‚å…·ä½“è€Œè¨€ï¼Œä»£ç å—ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>    for(unsigned int s = 1; s &lt; blockDim.x; s *= 2){
</span></span><span class=line><span class=cl>        if (tid % (2 * s) == 0) {
</span></span><span class=line><span class=cl>            sdata[tid] += sdata[tid + s];   
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>        __syncthreads();
</span></span><span class=line><span class=cl>    }
</span></span></code></pre></td></tr></table></div></div><p>ç¬¬ä¸€ä¸ªforï¼Œæ¿€æ´»çš„çº¿ç¨‹ä¸º0ï¼Œ2ï¼Œ4&mldr;ï¼›ç¬¬äºŒæ¬¡æ‰§è¡Œforå¾ªç¯ï¼Œæ¿€æ´»çš„çº¿ç¨‹ä¸º0ï¼Œ4ï¼Œ8&mldr; æ˜¾ç„¶ï¼Œæ¯ä¸ªforå¾ªç¯ä¸­åªæœ‰æœ‰50%ï¼Œ25%ã€‚ã€‚ã€‚çš„çº¿ç¨‹å¤„äºæ¿€æ´»çŠ¶æ€ï¼Œè¿™æ˜¾ç„¶æ˜¯æˆ‘ä»¬ä¸æƒ³çœ‹åˆ°äº†ã€‚æˆ‘ä»¬å¸Œæœ›å°½å¯èƒ½å¤šçš„çº¿ç¨‹éƒ½å¤„äºå·¥ä½œçŠ¶æ€ï¼Œè‡³å°‘åœ¨åŒä¸€ä¸ªwarpä¸­æ˜¯å¦‚æ­¤ã€‚</p><p><strong>å†…å­˜æ–¹é¢ï¼š</strong> ç”±äº warp å‘æ•£ï¼Œè¯¥æ–¹æ³•çš„å†…å­˜è®¿é—®æ¨¡å¼ä¸ä½³ã€‚æ¯ä¸ªçº¿ç¨‹è®¿é—®çš„æ•°æ®å…ƒç´ åˆ†å¸ƒåœ¨æ•´ä¸ªæ•°ç»„ä¸­ï¼Œå¯¼è‡´å†…å­˜è®¿é—®åˆ†æ•£è€Œéåˆå¹¶è®¿é—®ï¼ˆcoalescedï¼‰ï¼Œä»è€Œé€ æˆå¸¦å®½åˆ©ç”¨ç‡ä½ä¸‹å’Œè¾ƒé«˜çš„å†…å­˜å»¶è¿Ÿã€‚è¿™ç§åˆ†æ•£è®¿é—®ä¼šå¼•èµ·å¤šæ¬¡ç¼“æ…¢çš„å†…å­˜äº‹åŠ¡ï¼Œè€Œéä¸€æ¬¡å¿«é€Ÿäº‹åŠ¡ï¼Œæœªèƒ½å……åˆ†åˆ©ç”¨ GPU çš„å†…å­˜å¸¦å®½èƒ½åŠ›ã€‚ä¸è¿‡ï¼Œè¿™ä¸ªé—®é¢˜æˆ‘ä»¬ä¼šåœ¨åç»­çš„ä¼˜åŒ–ä¸­å¼€å§‹è§£å†³ã€‚å…·ä½“æ¥è¯´
è½®æ¬¡ 5: s = 16
if (tid % 32 == 0): åœ¨Warp 0 (çº¿ç¨‹0-31)ä¸­ï¼Œåªæœ‰çº¿ç¨‹0åœ¨å·¥ä½œã€‚
å®ƒè¯»å– sdata[16]ã€‚
è®¿å­˜åˆ†æ: æ•´ä¸ªWarpä¸ºäº†æ»¡è¶³çº¿ç¨‹0è¿™ä¸€ä¸ªè¯»å–è¯·æ±‚ï¼Œå‘èµ·äº†ä¸€æ¬¡å†…å­˜äº‹åŠ¡ã€‚ä½†è¿™æ¬¡äº‹åŠ¡ä¸­ï¼Œåªæœ‰1/32çš„æ•°æ®è¢«åˆ©ç”¨äº†ã€‚31/32çš„å†…å­˜å¸¦å®½è¢«æµªè´¹äº†ï¼</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆå…³æ³¨è®¡ç®—ç›¸å…³çš„é—®é¢˜ï¼Œå¹¶è¿›è¡Œä¸‹ä¸€æ­¥ä¼˜åŒ–ã€‚</p><h2 id=reduce-1äº¤é”™å¯»å€æ³•-20interleaved-addressing-20>REDUCE-1ï¼šäº¤é”™å¯»å€æ³• 2.0ï¼ˆInterleaved Addressing 2.0ï¼‰</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// REDUCTION 1 â€“ Interleaved Addressing 2.0
</span></span><span class=line><span class=cl>__global__ void reduce1(int *g_in_data, int *g_out_data){
</span></span><span class=line><span class=cl>    extern __shared__ int sdata[];  // å‚¨å­˜åœ¨å…±äº«å†…å­˜ä¸­
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // æ¯ä¸ªçº¿ç¨‹ä»å…¨å±€å†…å­˜åŠ è½½ä¸€ä¸ªå…ƒç´ åˆ°å…±äº«å†…å­˜
</span></span><span class=line><span class=cl>    unsigned int tid = threadIdx.x;
</span></span><span class=line><span class=cl>    unsigned int i = blockIdx.x * blockDim.x + threadIdx.x;
</span></span><span class=line><span class=cl>    sdata[tid] = g_in_data[i];
</span></span><span class=line><span class=cl>    __syncthreads();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // å½’çº¦æ“ä½œ -- åœ¨å…±äº«å†…å­˜ä¸­è¿›è¡Œ
</span></span><span class=line><span class=cl>    for(unsigned int s = 1; s &lt; blockDim.x; s *= 2){
</span></span><span class=line><span class=cl>        // æ³¨æ„æ­¥é•¿ s *= 2ï¼šè¿™å¯¼è‡´äº†äº¤é”™å¯»å€
</span></span><span class=line><span class=cl>        int index = 2 * s * tid;    // ç°åœ¨æˆ‘ä»¬ä¸å†éœ€è¦ if æ¡ä»¶å¸¦æ¥çš„åˆ†åŒ–åˆ†æ”¯
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        // ç¡®ä¿ä¸ä¼šè¶Šç•Œè®¿é—®
</span></span><span class=line><span class=cl>        if (index &lt; blockDim.x) 
</span></span><span class=line><span class=cl>        {
</span></span><span class=line><span class=cl>            sdata[index] += sdata[index + s];   // s ç”¨æ¥è¡¨ç¤ºå°†è¢«åˆå¹¶çš„åç§»é‡
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>        __syncthreads();
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    // çº¿ç¨‹0å°†æœ€ç»ˆç»“æœå†™å›å…¨å±€å†…å­˜
</span></span><span class=line><span class=cl>    if (tid == 0){
</span></span><span class=line><span class=cl>        g_out_data[blockIdx.x] = sdata[0];
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div></section><footer class=article-footer><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-ND 4.0</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".main-article");renderMathInElement(e,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})</script></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article><a href=/posts/dense-tree-build/><div class=article-details><h2 class=article-title>åŸºäºç¨ å¯†å­˜å‚¨çš„å¹¶è¡Œæ ‘æ„å»ºå®ç°æ–¹æ¡ˆ</h2></div></a></article><article><a href=/posts/cudatreecode/blog-post-treecode/><div class=article-details><h2 class=article-title>åŸºäºæ ‘ç»“æ„çš„ SPH ç²’å­é¢†åŸŸæœç´¢</h2></div></a></article><article><a href=/posts/blog-post-2/><div class=article-details><h2 class=article-title>SPH ç²’å­é¢†åŸŸæœç´¢</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//hugo-theme-stack.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2025 Example Person</section><section class=powerby>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º<br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>